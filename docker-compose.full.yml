services:
  ews:
    build: .
    container_name: ot-ews-full
    restart: unless-stopped
    network_mode: host
    privileged: true
    environment:
      EWS_MODE: full
      EWS_WEB_PORT: ${EWS_WEB_PORT:-8080}
      EWS_ETH0_IFACE: ${EWS_ETH0_IFACE:-eth0}
      EWS_ETH1_IFACE: ${EWS_ETH1_IFACE:-eth1}
      EWS_DEDUP_WINDOW_SECONDS: ${EWS_DEDUP_WINDOW_SECONDS:-30}
      EWS_EVENTS_RETENTION_DAYS: ${EWS_EVENTS_RETENTION_DAYS:-30}
      EWS_RECENT_WINDOW_SECONDS: ${EWS_RECENT_WINDOW_SECONDS:-600}
      EWS_DATA_DIR: /data
      EWS_API_KEY: ${EWS_API_KEY:-}
      EWS_WEBHOOK_URL: ${EWS_WEBHOOK_URL:-}
      EWS_SCAN_THRESHOLD_PORTS: ${EWS_SCAN_THRESHOLD_PORTS:-5}
      EWS_SCAN_THRESHOLD_SECONDS: ${EWS_SCAN_THRESHOLD_SECONDS:-60}
      EWS_EVENT_RATE_LIMIT: ${EWS_EVENT_RATE_LIMIT:-100}
    volumes:
      - ./data:/data
